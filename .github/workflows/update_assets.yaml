name: Update static assets

on:
    workflow_dispatch:
      inputs:
        test:
          required: true
          type: choice
          default: "FALSE"
          options:
            - "TRUE"
            - "FALSE"

jobs:
    run:
        runs-on: ubuntu-latest
        env:
          GMAS_TEST_RUN: ${{ inputs.test || 'FALSE' }}
          DSCI_AZ_SAS_DEV: ${{ secrets.DSCI_AZ_SAS_DEV }}
          DSCI_AZ_SAS_PROD: ${{ secrets.DSCI_AZ_SAS_PROD }}
        steps:   
            - name: Checkout repository
              uses: actions/checkout@v3

            - name: Set up environment
              uses: ocha-dap/hdx-signals-actions@2dfcc5c8796903a01b393b8ebed26d2582f305ff

            - name: Run R scripts to update files
              shell: bash
              run: find ./src-static/ -name "*.R" -exec Rscript {} \;
